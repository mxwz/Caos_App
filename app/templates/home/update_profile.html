<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人信息更新</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style_update_profile.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='ico/1.ico') }}" type="image/x-icon">
</head>
<body>
<div class="container">
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="flash_msg" style="display: none;"> <!-- 初始状态为隐藏 -->
                    <div>{{ message }}</div>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <h1>个人信息更新</h1>
    <form method="POST" action="{{ url_for('page.update_profile', user_id=user.id) }}" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        <div class="input-group">
            <label for="name">昵称：</label>
            <input type="text" id="name" name="name" value="{{ name }}" readonly>
        </div>
        <div class="input-group">
            <label for="email">邮箱：</label>
            <input type="email" id="email" name="email" value="{{ email }}" readonly>
        </div>

        <div class="input-group">
            <label for="bio">个性签名：</label>
            {{ form.bio(class="input-field", placeholder="请输入个性签名") }}
        </div>
        <div class="input-group">
            <label for="phone_number">电话号码：</label>
{#            {{ form.phone_number(class="input-field", placeholder="请输入电话号码") }}#}
            <input type="tel" id="phone_number" name="phone_number" class="input-field" placeholder="请输入电话号码" pattern="^1[3-9]\d{9}$" required>
            <small id="phone-help" class="form-text text-muted">请输入有效的手机号码。</small>
        </div>
        <div class="input-group">
            <label for="gender">性别：</label>
            <select id="gender" name="gender" class="input-field">
                <option value="" {% if not form.gender.data %}selected{% endif %}>请选择</option>
                <option value="男" {% if form.gender.data == '男' %}selected{% endif %}>男</option>
                <option value="女" {% if form.gender.data == '女' %}selected{% endif %}>女</option>
                <option value="其他" {% if form.gender.data == '其他' %}selected{% endif %}>其他</option>
            </select>
        </div>
        <div class="input-group">
            <label for="age">年龄：</label>
            <select id="age" name="age" class="input-field">
                <option value="" {% if not form.age.data %}selected{% endif %}>请选择</option>
                {% for age in range(16, 101) %}
                    <option value="{{ age }}" {% if form.age.data == age %}selected{% endif %}>{{ age }}</option>
                {% endfor %}
                <option value="不便透露" {% if form.age.data == '不便透露' %}selected{% endif %}>不便透露</option>
            </select>
        </div>
        <div class="input-group">
            <label for="industry">行业：</label>
            <select id="industry" name="industry" class="input-field">
                <option value="" {% if not form.industry.data %}selected{% endif %}>请选择</option>
                <option value="IT" {% if form.industry.data == 'IT' %}selected{% endif %}>IT</option>
                <option value="金融" {% if form.industry.data == '金融' %}selected{% endif %}>金融</option>
                <option value="教育" {% if form.industry.data == '教育' %}selected{% endif %}>教育</option>
                <option value="医疗" {% if form.industry.data == '医疗' %}selected{% endif %}>医疗</option>
                <option value="其他" {% if form.industry.data == '其他' %}selected{% endif %}>其他</option>
            </select>
        </div>
        <div class="input-group">
            <label for="interests">兴趣：</label>
            {{ form.interests(class="input-field", placeholder="请输入兴趣") }}
        </div>
{#        <div class="input-group">#}
{#            <label for="location">地址：</label>#}
{#            <select id="location" name="location" class="input-field">#}
{#                <option value="" {% if not form.location.data %}selected{% endif %}>请选择</option>#}
{#                <option value="北京" {% if form.location.data == '北京' %}selected{% endif %}>北京</option>#}
{#                <option value="上海" {% if form.location.data == '上海' %}selected{% endif %}>上海</option>#}
{#                <option value="广州" {% if form.location.data == '广州' %}selected{% endif %}>广州</option>#}
{#                <option value="深圳" {% if form.location.data == '深圳' %}selected{% endif %}>深圳</option>#}
{#                <option value="其他" {% if form.location.data == '其他' %}selected{% endif %}>其他</option>#}
{#            </select>#}
{#        </div>#}

        <div class="input-group">
            <label for="location">地址：</label>
            {{ form.location(class="input-field", placeholder="请输入地址") }}
        </div>
        <div class="input-group">
            <label for="photo">头像：</label>
            {{ form.photo(class="input-field", accept="image/*") }}
        </div>


        <button type="submit" class="submit-btn">提交</button>
    </form>
    <span id="next"><a href="{{ url_for("page.home") }}">返回主页</a><span>&nbsp;&nbsp;|&nbsp;&nbsp;</span><a href="{{ url_for("main.index") }}" style="color: red">返回首页</a></span>
</div>
<script>
    // 显示闪现消息
    document.querySelectorAll('.flash_msg').forEach(function(msg) {
        msg.style.display = 'block';
        setTimeout(function() {
            msg.style.display = 'none';
        }, 3000); // 消息显示3秒后消失
    });
</script>
{#<script>document.querySelector('form').addEventListener('submit', function(event) {#}
{#    var photoInput = document.getElementById('photo');#}
{#    if (photoInput.files.length === 0) {#}
{#        alert('请选择一个头像文件');#}
{#        event.preventDefault(); // 阻止表单提交#}
{#    }#}
{# });#}
{#</script>#}
</body>
</html>